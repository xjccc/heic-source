!function t(e,n){"object"===typeof exports&&"object"===typeof module?module.exports=n():"function"===typeof define&&define.amd?define([],n):"object"===typeof exports?exports.Lucky=n():e.Lucky=n()}(self,(function(){return function(){"use strict";var t={763:function(t,e,n){n.r(e)},432:function(t,e,n){var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__awaiter||function(t,e,n,r){function o(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,i){function a(t){try{s(r.next(t))}catch(e){i(e)}}function c(t){try{s(r.throw(t))}catch(e){i(e)}}function s(t){t.done?n(t.value):o(t.value).then(a,c)}s((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},r,o,i,a;return a={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(t){return function(e){return s([t,e])}}function s(a){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,o=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(!(i=(i=n.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){n=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){n.label=a[1];break}if(6===a[0]&&n.label<i[1]){n.label=i[1],i=a;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(a);break}i[2]&&n.ops.pop(),n.trys.pop();continue}a=e.call(t,n)}catch(c){a=[6,c],o=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0}),e.CreateLucky=void 0;var a=n(332);n(763);var c=function(){function t(t){var e=t.container,n=t.data,o=t.options;this.type="wheel",this.luckyId=-1,this.isStart=!1,this.data=[];var i=(0,a.getType)(e);this.container=(0,a.checkType)(i,e),this.data=n,this.options=r({createPlate:a.createPlate,createPointer:a.createPointer,rotate:7200,time:5e3},o),this.render()}return t.prototype.clickToLucky=function(){return o(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return this.isStart?[2]:(this.isStart=!0,this.options.start?[4,this.options.start()]:[3,2]);case 1:t.sent(),t.label=2;case 2:return this.start(),[2]}}))}))},t.prototype.start=function(){return o(this,void 0,void 0,(function(){var t,e,n,r,o,a=this;return i(this,(function(i){return t=this.getLuckyIndex(),-1===this.luckyId||-1===t||(e=this.container.querySelector(".lucky_wheel-plate"),n=this.options,r=n.rotate-n.rotate%360,e.style.transform="rotate(".concat(r+t*(-360/this.data.length),"deg)"),e.style.transition="transform ".concat(n.time/1e3,"s ease-in-out"),o=setTimeout((function(){a.stop(),o&&clearTimeout(o)}),n.time)),[2]}))}))},t.prototype.stop=function(){var t,e,n=this.container.querySelector(".lucky_wheel-plate"),r=this.getLuckyIndex();n.style.transition="none",n.style.transform="rotate(".concat(r*(-360/this.data.length),"deg)"),this.isStart=!1,this.setLuckyId(-1),(null===(t=this.options)||void 0===t?void 0:t.callback)&&(null===(e=this.options)||void 0===e||e.callback())},t.prototype.setLuckyId=function(t){this.luckyId=t},t.prototype.getLuckyIndex=function(){var t=this;return this.data.findIndex((function(e){return e.id===t.luckyId}))},t.prototype.createPlate=function(t){var e=this.options.createPlate(t);return"string"===typeof e&&(e=(0,a.createElement)("div",{className:"lucky_wheel-plate",innerHTML:e})),e},t.prototype.createPointer=function(){var t=this,e=this.options.createPointer();return"string"===typeof e&&(e=(0,a.createElement)("div",{className:"lucky_wheel-pointer",innerHTML:e})),e.addEventListener("click",(function(e){t.clickToLucky(),e.preventDefault()})),e},t.prototype.render=function(){var t=this.createPlate(this.data),e=this.createPointer();this.container.appendChild(t),this.container.appendChild(e)},t.className="lucky_wheel-container",t}();e.CreateLucky=c},332:function(t,e){function n(t){return Object.prototype.toString.call(t).slice(8,-1)}function r(t,e){var n;if("String"===t&&e.startsWith("#"))n=document.querySelector(e),console.log(e);else{if(!t.endsWith("Element"))throw new Error("\u8bf7\u786e\u4fdd\u6700\u5916\u5c42\u7ed3\u6784\u5b58\u5728\u3002\u6216\u4f20\u5165container\u5bb9\u5668id");n=e}return n}function o(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function i(t,e){var n=document.createElement(t);for(var r in e)n[r]=e[r];return n}function a(t){var e;return i("div",{className:"lucky_wheel-plate",innerHTML:t.map((function(t,e){return'<div class="level level-'.concat(e+1,'"><figure><img src="').concat(t.img,'" /></figure></div>').trim()})).join("")})}function c(){return i("div",{className:"lucky_wheel-pointer"})}Object.defineProperty(e,"__esModule",{value:!0}),e.createPointer=e.createPlate=e.createElement=e.checkType=e.getType=void 0,e.getType=n,e.checkType=r,e.createElement=i,e.createPlate=a,e.createPointer=c}},e={},n;function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n].call(i.exports,i,i.exports,r),i.exports}return r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r(432)}()}));